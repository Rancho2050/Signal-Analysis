### 1 课程概述

#### 1.1 命令

##### 1.1.1 输入命令

您可以通过在命令行窗口中 MATLAB 提示符 (`>>`) 后输入命令，然后按 **Enter** 键来执行命令。

除非另有指定，否则 MATLAB 会将计算结果存储在一个名为 `ans` 的变量中。

MATLAB 中的等号 (`=`) 是*赋值*运算符，这意味着等号右侧的表达式赋给左侧的变量。

当您输入 `x = 3 + 4` 时，MATLAB 首先计算 `3 + 4`，然后将结果 (`7`) 赋给变量 `x`。  



`y` 的值是使用 `m` 计算的。修改 `m` 时，是否重新计算 `y`？

`y` 的值保持不变，因为 MATLAB 不会在命令行窗口中重新运行以前的命令。

如果您要在修改 `m` 后重新计算 `y`，需要重复命令 `y = m/2`。

现在就试一下！使用向上箭头重新调用命令 `y = m/2`，然后按 Enter 键。切记，要查看 `y` 的新值，请不要在命令末尾使用分号。  

##### 1.1.2 命名变量

您可以将 MATLAB 变量命名为符合以下规则的任何名称：以字母**开头**，并且仅包含字母、数字和下划线 (`_`)。

##### 1.1.3 保存和加载变量

您可以使用 `save` 命令将工作区中的变量保存到称为 MAT 文件的 MATLAB 特定格式文件中。

要将工作区保存到名为`foo.mat`的 MAT 文件中，请使用命令：

```matlab
>> save foo
```

 当您要在 MATLAB 中切换处理新问题时，可能需要整理工作区。您可以使用 `clear` 函数从工作区中删除所有变量。

在工作区中，您可以看到 

```matlab
clear
```

 命令清空了所有变量。

您可以使用 `load` 命令从 MAT 文件加载变量。

```matlab
>> load foo
```

请注意，变量 `data` 在工作区中列出。您可以通过输入变量的名称来查看任何变量的内容。

```
>> myvar
```

`clear` 函数清理工作区。`clc` 命令清理**命令行窗口**。

##### 1.1.4 使用内置的函数和常量

MATLAB 包含一些内置的常量，例如用 `pi` 表示 *π*。

```matlab
>> a = pi
a = 
    3.1416
```

这里虽然只对 *π* 显示了四位小数，但它在内部是用更高的精度表示的。

MATLAB 包含许多内置的函数，例如 `abs`（计算绝对值）和 `eig`（计算特征值）。

```matlab
>> a = sin(-5)
a = 
    0.9589
```

请注意，MATLAB 使用圆括号来传递函数输入，与标准的数学表示法类似。

**任务**

使用 `sqrt` 函数计算 `-9` 的平方根。将结果赋给一个名为 `z` 的变量。

请注意，解包含虚数 `i`，这是 MATLAB 中的内置常量。

```matlab
 z = sqrt(-9)
```

在命令行窗口中仅显示前四个小数位。您可以使用 `format` 函数控制显示的精度。

请试着输入 `format long` 并显示 `x` 的值。

输入 `format short` 可切换回默认显示。  

#### 1.2 向量和矩阵

![1672044789513](D:\# 工作\ENN\动设备故障诊断\Signal Process-Matlab\figures\1672044789513.png)

单个称为标量的数值实际上是一个 1×1 数组，也即它包含 1 行 1 列。

当您用空格（或逗号）分隔数值时（如前面的任务中所示），MATLAB 会将这些数值组合为一个*行向量*，行向量是一个包含一行多列的数组 (1×*n*)。当您用分号分隔数值时，MATLAB 会创建一个*列向量* (*n*×1)。

您可以组合使用空格和分号来创建一个矩阵，即包含多行多列的数组。输入矩阵时，您必须逐行输入它们。

```matlab
x = [3 4 5;6 7 8]
x = 
    3    4    5
    6    7    8
```

在 MATLAB 中，您可以在方括号内执行计算。

```matlab
x = [abs(-4) 4^2]
x = 
     4    16
```

数组在 MATLAB 中的使用非常普遍。事实上，MATLAB 是 MATrix LABoratory 的缩写。您会发现大多数 MATLAB 功能可以同时处理多个值。

创建数组时有一定的灵活性。例如，可通过以下几种有效方法来创建同一数组：

```matlab
x = [7 9]
x=[7,9]
x = [7, 9]
```

##### 1.2.1 创建等间距向量

我们经常需要创建一些包含等间距数值的向量，例如以下向量。

```matlab
y = [5 6 7 8]
y = 
    5    6    7    8
```

对于长向量，输入单个数值是不实际的。可用来创建等间距向量的替代便捷方法是使用 `:` 算符并仅指定起始值和最终值。

```matlab
y = 5:8
y = 
    5    6    7    8
```

请注意，当您使用冒号运算符时，不需要方括号。

`:` 运算符使用默认的间距 `1`，但是您可以指定您自己的间距，如下所示。

```matlab
x = 20:2:26
x = 
    20    22    24    26
```

如果您知道向量中所需的元素数目（而不是每个元素之间的间距），则可以改用 `linspace` 函数：

```matlab
linspace(first,last,number_of_elements)
```

```matlab
x = linspace(0,1,5)
x = 
    0    0.250    0.500    0.750    1.000
```

`linspace` 和 `:` 运算符都可创建行向量。但是，您可以使用转置运算符 (`'`) 将行向量转换为列向量。

您可以通过在一条命令中创建行向量并将其全部转置来创建列向量。注意此处使用圆括号来指定运算的顺序。

```matlab
x = (1:2:5)'
x = 
    1
    3
    5
```

**任务**

在一条命令中，创建一个名为 `x` 的列向量，该向量以 `5` 开头，以 `9` 结尾，并且元素之间的间隔为 `2`。

```matlab
x = (5:2:9)'
```

##### 1.2.2 数组创建函数

MATLAB 包含许多函数，可帮助您创建常用的矩阵，例如随机数矩阵。

```matlab
x = rand(2)
x = 
    0.8147    0.1270
    0.9058    0.9134
```

请注意，`rand(2)` 命令中的 `2` 指定输出将为一个 2×2 的随机数矩阵。

许多矩阵创建函数允许您输入一个数值来创建方阵 (*n*×*n*)，或者输入两个数值来创建非方阵。

```matlab
x = rand(2)
x = 
    0.8147    0.1270
    0.9058    0.9134
x = rand(2,3)
x = 
    0.6324    0.2785    0.9575
    0.0975    0.5469    0.9649
```

使用 `zeros` 函数创建一个包含 `6` 行 `3` 列 (6×3) 的全零矩阵。将结果赋给名为 `x` 的变量。

```matlab
x = zeros(6,3)
```

如何知道现有矩阵的大小？您可以使用 `size` 函数。

```matlab
size(x)
```

您也可以使用一行代码创建与现有矩阵大小相同的矩阵。

```matlab
rand(size(x))
```

##### 1.2.3 索引和修改数组

###### 1.2.3.1 对数组进行索引

您可以使用 MATLAB 关键字 `end` 作为行或列索引来引用最后一个元素。

```matlab
y = A(end,2)
```

**任务**

使用 `end` 关键字获取变量 `data` 的最后一行第三列的值。将该值赋给一个名为 `x` 的变量。

```matlab
x = data(end,3)
```

请注意，您可以将算术运算与关键字 `end` 结合使用。例如：

```matlab
y = A(end-1,end-2)
```

如果只对一个矩阵使用一种索引，它将按顺序从上到下遍历每列。试着用一种索引提取 `data` 的第八个元素。

![1672058061821](D:\# 工作\ENN\动设备故障诊断\Signal Process-Matlab\figures\1672058061821.png)

```
data(8)
```

![1672058085389](D:\# 工作\ENN\动设备故障诊断\Signal Process-Matlab\figures\1672058085389.png)

###### 1.2.3.2 提取多个元素

用作索引时，冒号运算符  (`:`)  可指代该维度中的所有元素。以下语法

```matlab
x = A(2,:)
```

会创建一个包含 `A` 中第 2 行上所有元素的行向量。

冒号运算符可以引用某个值范围。以下语法会创建一个包含矩阵 `A` 的第 1 行、第 2 行和第 3 行所有元素的矩阵。

```matlab
x = A(1:3,:)
```

**任务**

创建一个名为 `volumes` 的变量，其中包含 `data` 的最后两列的所有元素。

```matlab
volumes = data(:,end-1:end)
```

单个索引值可用于引用向量元素。例如

```matlab
x = v(3)
```

会返回向量 `v` 的第 3 个元素（当 `v` 为行向量或列向量时）。

单个索引值范围可用于引用向量元素的子集。例如

```matlab
x = v(3:end)
```

返回向量 `v` 的一个子集，其中包含从第三个到最后一个元素范围内的所有元素。

索引可以是非连续数字。试着提取 `density` 的第一个、第三个和第六个元素。

```matlab
p = density([1 3 6])
```

###### 1.2.3.3 更改数组中的值

记住您可以使用 `:` 字符来提取整列数据。

**任务**

创建一个名为 `v2` 并且包含 `data` 的最后一列元素的向量。

```matlab
v2 = data(:,end)
```

###### 1.2.3.4 对向量执行数组运算

`*` 运算符执行[矩阵乘法](http://www.mathworks.com/help/matlab/ref/mtimes.html)。因此，如果您使用 `*` 将两个大小相同的向量相乘，则由于内部维度不一致，您将会收到一条错误消息。

```matlab
z = [3 4] * [10 20]
```

错误使用  * 用于矩阵乘法的维度不正确。 而  `.*` 运算符执行按元素乘法，允许您将两个大小相同的数组的对应元素相乘。

```matlab
z = [3 4] .* [10 20]
z = 
    30    80
```

您已对如下元素执行了数组运算：

- 两个相同大小的数组
- 一个标量和一个数组

您还可以对其他具有兼容大小的数组执行运算。例如，尝试执行以下语句：

```matlab
x = [1 2;3 4;5 6; 7 8].*[1;2;3;4]
```

`x` 的大小是多少？

![1672735778002](D:\# 工作\ENN\动设备故障诊断\Signal Process-Matlab\figures\1672735778002.png)

